name: Conselhando


on:

    schedule:

        - cron: '0 * * * *'


jobs:

    build:

        runs-on: ubuntu-latest


        steps:

            - uses: actions/checkout@v2


            - name: Make envfile

              uses: SpicyPizza/create-envfile@v1

              with:

                  envkey_CONSUMER_KEY: ${{ secrets.CONSUMER_KEY }}

                  envkey_CONSUMER_SECRET: ${{ secrets.CONSUMER_SECRET }}

                  envkey_ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}

                  envkey_ACCESS_TOKEN_SECRET: ${{ secrets.ACCESS_TOKEN_SECRET }}
                  
                  envkey_OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}

                  envkey_OPENAI_ORGANZIATION: ${{ secrets.OPENAI_ORGANIZATION }}

                  file_name: .env


            - name: Build the docker container

              run: docker build .


            - name: Run the script ðŸš€

              run: docker-compose up
